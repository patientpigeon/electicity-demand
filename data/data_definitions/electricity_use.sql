
CREATE TABLE utilities_workspace.utilities.electricity_use_extract (
  zone STRING,
  date_time STRING,
  updated_at STRING,
  created_at STRING,
  power_consumption_total BIGINT,
  power_production_total BIGINT,
  power_import_total BIGINT,
  power_export_total BIGINT,
  fossil_free_percentage BIGINT,
  renewable_percentage BIGINT,
  is_estimated BOOLEAN,
  estimation_method STRING,
  temporal_granularity STRING,
  cons_nuclear BIGINT,
  cons_geothermal BIGINT,
  cons_biomass BIGINT,
  cons_coal BIGINT,
  cons_wind BIGINT,
  cons_solar BIGINT,
  cons_hydro BIGINT,
  cons_gas BIGINT,
  cons_oil BIGINT,
  cons_unknown BIGINT,
  cons_hydro_discharge BIGINT,
  cons_battery_discharge BIGINT,
  prod_nuclear BIGINT,
  prod_geothermal BIGINT,
  prod_biomass BIGINT,
  prod_coal BIGINT,
  prod_wind BIGINT,
  prod_solar BIGINT,
  prod_hydro BIGINT,
  prod_gas BIGINT,
  prod_oil BIGINT,
  prod_unknown BIGINT,
  prod_hydro_discharge BIGINT,
  prod_battery_discharge BIGINT)
USING delta
LOCATION 'utilities/electricity_use_extract'
TBLPROPERTIES (
  'delta.enableDeletionVectors' = 'true',
  'delta.feature.appendOnly' = 'supported',
  'delta.feature.deletionVectors' = 'supported',
  'delta.feature.invariants' = 'supported',
  'delta.minReaderVersion' = '3',
  'delta.minWriterVersion' = '7');


CREATE TABLE utilities_workspace.utilities.electricity_use (
  id BIGINT GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1),
  city STRING NOT NULL,
  zone STRING,
  date_time TIMESTAMP NOT NULL,
  updated_at TIMESTAMP,
  created_at TIMESTAMP,
  power_consumption_total INT,
  power_production_total INT,
  power_import_total INT,
  power_export_total INT,
  fossil_free_percentage INT,
  renewable_percentage INT,
  is_estimated BOOLEAN,
  estimation_method STRING,
  temporal_granularity STRING,
  cons_nuclear INT,
  cons_geothermal INT,
  cons_biomass INT,
  cons_coal INT,
  cons_wind INT,
  cons_solar INT,
  cons_hydro INT,
  cons_gas INT,
  cons_oil INT,
  cons_unknown INT,
  cons_hydro_discharge INT,
  cons_battery_discharge INT,
  prod_nuclear INT,
  prod_geothermal INT,
  prod_biomass INT,
  prod_coal INT,
  prod_wind INT,
  prod_solar INT,
  prod_hydro INT,
  prod_gas INT,
  prod_oil INT,
  prod_unknown INT,
  prod_hydro_discharge INT,
  prod_battery_discharge INT,
  CONSTRAINT `pk_electricity_use` PRIMARY KEY (`city`, `date_time`),
  CONSTRAINT `fk_electricity_use` FOREIGN KEY (`city`) REFERENCES `utilities_workspace`.`utilities`.`city` (`city`))
USING delta
LOCATION 'utilities/electricity_use'
TBLPROPERTIES (
  'delta.enableDeletionVectors' = 'true',
  'delta.feature.appendOnly' = 'supported',
  'delta.feature.deletionVectors' = 'supported',
  'delta.feature.identityColumns' = 'supported',
  'delta.feature.invariants' = 'supported',
  'delta.minReaderVersion' = '3',
  'delta.minWriterVersion' = '7');